{% extends "index.html" %}
{% block content %}
<h1>{{ _('Admin Dashboard') }}</h1>

<div class="row" style="margin-bottom: 20px;">
  <a class="btn" href="{{ url_for('admin_only') }}">–ù–∞–∑–∞–¥ –≤ –∞–¥–º–∏–Ω-—Ä–∞–∑–¥–µ–ª</a>
  <a class="btn" href="{{ url_for('admin_moderation') }}">{{ _('Moderation') }}</a>
  <a class="btn" href="{{ url_for('admin_role_requests') }}">{{ _('Role Change Requests') }}</a>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon">üíº</div>
    <div class="stat-content">
      <h3>{{ stats.active_vacancies }}</h3>
      <p>{{ _('Active Vacancies') }}</p>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon">üéì</div>
    <div class="stat-content">
      <h3>{{ stats.active_internships }}</h3>
      <p>{{ _('Active Internships') }}</p>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon">‚è≥</div>
    <div class="stat-content">
      <h3>{{ stats.pending_moderation }}</h3>
      <p>{{ _('Pending Moderation') }}</p>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon">üîÑ</div>
    <div class="stat-content">
      <h3>{{ stats.role_change_requests }}</h3>
      <p>{{ _('Role Change Requests') }}</p>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon">üë•</div>
    <div class="stat-content">
      <h3>{{ stats.total_users }}</h3>
      <p>{{ _('Total Users') }}</p>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon">üè¢</div>
    <div class="stat-content">
      <h3>{{ stats.total_companies }}</h3>
      <p>{{ _('Total Companies') }}</p>
    </div>
  </div>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
<div class="row">
  <div class="card">
    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
    <div class="quick-actions">
      <a href="{{ url_for('admin_moderation', tab='vacancies') }}" class="btn btn-primary">
        –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≤–∞–∫–∞–Ω—Å–∏–π
      </a>
      <a href="{{ url_for('admin_moderation', tab='internships') }}" class="btn btn-primary">
        –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å—Ç–∞–∂–∏—Ä–æ–≤–æ–∫
      </a>
      <a href="{{ url_for('admin_role_requests', status='pending') }}" class="btn btn-warning">
        –ó–∞—è–≤–∫–∏ –Ω–∞ —Å–º–µ–Ω—É —Ä–æ–ª–∏
      </a>
    </div>
  </div>
  
  <div class="card">
    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º</h3>
    <div id="roleStats">
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
    </div>
  </div>
</div>

<!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
<div class="card">
  <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
  <div id="recentActivity">
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π...</p>
  </div>
</div>

<style>
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.stat-card {
  background: linear-gradient(135deg, #1a1f2e 0%, #2d3748 100%);
  border: 1px solid #333;
  border-radius: 12px;
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: transform 0.2s ease;
}

.stat-card:hover {
  transform: translateY(-2px);
}

.stat-icon {
  font-size: 2.5em;
  opacity: 0.8;
}

.stat-content h3 {
  margin: 0;
  font-size: 2em;
  color: #4a9eff;
}

.stat-content p {
  margin: 5px 0 0 0;
  color: #9fb0c0;
  font-size: 0.9em;
}

.quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.quick-actions .btn {
  flex: 1;
  min-width: 150px;
  text-align: center;
}

.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

@media (max-width: 768px) {
  .row {
    grid-template-columns: 1fr;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
}

#roleStats, #recentActivity {
  min-height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9fb0c0;
}
</style>

<script>
// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
document.addEventListener('DOMContentLoaded', function() {
  loadRoleStats();
  loadRecentActivity();
});

function loadRoleStats() {
  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AJAX –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ä–æ–ª—è–º
  document.getElementById('roleStats').innerHTML = `
    <div style="text-align: center;">
      <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å</p>
      <small>–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</small>
    </div>
  `;
}

function loadRecentActivity() {
  // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AJAX –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
  document.getElementById('recentActivity').innerHTML = `
    <div style="text-align: center;">
      <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å</p>
      <small>–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</small>
    </div>
  `;
}
</script>
{% endblock %}
