{% extends "index.html" %}
{% block content %}
<h1>–û—Ç–∫–ª–∏–∫ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é</h1>

<div style="background: #1a1f2e; padding: 20px; border-radius: 8px; border: 1px solid #2a3240; margin-bottom: 20px;">
  <h2 style="margin: 0 0 15px 0; color: #e6edf3;">{{ application.vacancy_title }}</h2>
  <p style="margin: 5px 0; color: #9fb0c0;">
    <strong>–ö–∞–Ω–¥–∏–¥–∞—Ç:</strong> {{ application.candidate_name }}
  </p>
  <p style="margin: 5px 0; color: #9fb0c0;">
    <strong>–°—Ç–∞—Ç—É—Å:</strong> 
    <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; background: {% if application.status == 'new' %}#663{% elif application.status == 'viewed' %}#335{% elif application.status == 'interview' %}#063{% else %}#633{% endif %};">
      {{ application.status }}
    </span>
  </p>
  <p style="margin: 5px 0; color: #9fb0c0;">
    <strong>–î–∞—Ç–∞ –æ—Ç–∫–ª–∏–∫–∞:</strong> {{ application.created_at }}
  </p>
</div>

{% if application.first_name or application.last_name %}
<div style="background: #1a1f2e; padding: 20px; border-radius: 8px; border: 1px solid #2a3240; margin-bottom: 20px;">
  <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ</h3>
  {% if application.first_name or application.last_name %}
  <p><strong>–ò–º—è:</strong> {{ application.first_name or '' }} {{ application.last_name or '' }}</p>
  {% endif %}
  {% if application.phone %}
  <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ application.phone }}</p>
  {% endif %}
</div>
{% endif %}

{% if application.resume_title %}
<div style="background: #1a1f2e; padding: 20px; border-radius: 8px; border: 1px solid #2a3240; margin-bottom: 20px;">
  <h3>–†–µ–∑—é–º–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</h3>
  <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–∑—é–º–µ:</strong> {{ application.resume_title }}</p>
  
  {% if application.resume_file %}
  <div style="margin: 10px 0;">
    <strong>–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:</strong>
    <div style="background: #0b0f14; padding: 15px; border-radius: 4px; margin-top: 5px; color: #cfe3ff;">
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
        <span>üìé {{ application.resume_file.split('/')[-1] if '/' in application.resume_file else application.resume_file }}</span>
        <div style="display: flex; gap: 8px;">
          <a href="{{ url_for('hr_download_resume', resume_id=application.resume_id) }}" class="btn" style="padding: 6px 12px; font-size: 0.8rem;">–°–∫–∞—á–∞—Ç—å</a>
        </div>
      </div>
      <small style="color: #9fb0c0;">–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º</small>
    </div>
  </div>
  {% endif %}
  
  {% if application.experience %}
  <div style="margin: 10px 0;">
    <strong>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã:</strong>
    <div style="background: #0b0f14; padding: 10px; border-radius: 4px; margin-top: 5px; color: #cfe3ff;">
      {{ application.experience }}
    </div>
  </div>
  {% endif %}
  {% if application.education %}
  <div style="margin: 10px 0;">
    <strong>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</strong>
    <div style="background: #0b0f14; padding: 10px; border-radius: 4px; margin-top: 5px; color: #cfe3ff;">
      {{ application.education }}
    </div>
  </div>
  {% endif %}
</div>
{% endif %}

{% if application.cover_letter %}
<div style="background: #1a1f2e; padding: 20px; border-radius: 8px; border: 1px solid #2a3240; margin-bottom: 20px;">
  <h3>–°–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ</h3>
  <div style="background: #0b0f14; padding: 15px; border-radius: 4px; color: #cfe3ff;">
    {{ application.cover_letter }}
  </div>
</div>
{% endif %}

<div class="row">
  <button class="btn primary" onclick="updateApplicationStatus({{ application.id }}, 'viewed')">–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–µ</button>
  <button class="btn" onclick="updateApplicationStatus({{ application.id }}, 'interview')">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ</button>
  <button class="btn" onclick="updateApplicationStatus({{ application.id }}, 'rejected')">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
  <a class="btn" href="{{ url_for('hr_dashboard') }}">–ù–∞–∑–∞–¥ –∫ –æ—Ç–∫–ª–∏–∫–∞–º</a>
</div>

<script>
function updateApplicationStatus(applicationId, status) {
  // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã AJAX –∑–∞–ø—Ä–æ—Å
  alert('–§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞');
}
</script>
{% endblock %}
